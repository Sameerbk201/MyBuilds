"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[581],{2581:(e,s,t)=>{t.d(s,{A:()=>o});var a=t(5043),r=t(579);const o=e=>{let{value:s,onChange:t,debounce:o=700,...l}=e;const[n,i]=(0,a.useState)(s);return(0,a.useEffect)((()=>{i(s)}),[s]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{t(n)}),o);return()=>clearTimeout(e)}),[n]),(0,r.jsx)("input",{...l,value:n,onChange:e=>i(e.target.value)})}},7338:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(5043),r=t(1462),o=t(8931),l=t(7111),n=t(2581),i=t(579);const d=e=>{let{columns:s,data:t,handleDownload:d,flg:c=!0,inpflag:u=!0,heightFlag:p=!1}=e;const[g,m]=(0,a.useState)(""),x=(0,o.N4)({data:t,columns:s,state:{globalFilter:g},getFilteredRowModel:(0,l.hM)(),getCoreRowModel:(0,l.HT)(),getPaginationRowModel:(0,l.kW)()});return(0,i.jsxs)("div",{className:"p-2 text-white ",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[u&&(0,i.jsx)("div",{className:"flex items-center gap-2 text-black",children:(0,i.jsx)(n.A,{value:null!==g&&void 0!==g?g:"",onChange:e=>m(String(e)),className:"p-2 bg-transparent outline-none border-b-2 focus:border-indigo-500",placeholder:"Search all columns..."})}),c&&(0,i.jsxs)("button",{onClick:e=>{},className:"p-2 bg-green-500 rounded-md text-white flex items-center gap-1",children:[(0,i.jsx)(r.U01,{className:"w-6 h-6"}),"Download"]})]}),(0,i.jsx)("div",{className:"w-[350px] h-[400px] text-sm sm:text-sm md:text-sm lg:text-sm overflow-auto sm:w-full md:w-full md:h-[484px] lg:w-full lg:h-[484px]",children:(0,i.jsxs)("table",{className:"border-collapse text-left border border-gray-700 md:w-full lg:w-full",children:[(0,i.jsx)("thead",{className:"bg-indigo-600 ",children:x.getHeaderGroups().map((e=>(0,i.jsx)("tr",{children:e.headers.map((e=>(0,i.jsx)("th",{className:"capitalize px-3.5 py-2",children:(0,o.Kv)(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,i.jsx)("tbody",{children:x.getRowModel().rows.length?x.getRowModel().rows.map(((e,s)=>(0,i.jsx)("tr",{className:"\n                  ".concat(s%2===0?"bg-gray-900":"bg-gray-800","\n                  "),children:e.getVisibleCells().map((e=>(0,i.jsx)("td",{className:"px-3.5 py-2",children:(0,o.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id))):(0,i.jsx)("tr",{className:"text-center h-32",children:(0,i.jsx)("td",{colSpan:12,children:"No Recoard Found!"})})})]})}),(0,i.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-center lg:justify-end mt-2 lg:mt-0 lg:gap-2 text-black",children:[(0,i.jsx)("button",{onClick:()=>{x.previousPage()},disabled:!x.getCanPreviousPage(),className:"p-1 border border-gray-300 px-2 lg:px-2 disabled:opacity-30",children:"<"}),(0,i.jsx)("button",{onClick:()=>{x.nextPage()},disabled:!x.getCanNextPage(),className:"p-1 border border-gray-300 px-2 disabled:opacity-30",children:">"}),(0,i.jsxs)("div",{className:"mt-2 lg:mt-0 flex flex-col lg:flex-row items-center gap-2",children:[(0,i.jsxs)("span",{className:"flex items-center gap-1",children:[(0,i.jsx)("div",{children:"Page"}),(0,i.jsxs)("strong",{children:[x.getState().pagination.pageIndex+1," of"," ",x.getPageCount()]})]}),(0,i.jsxs)("span",{className:"flex items-center gap-1",children:["| Go to page:",(0,i.jsx)("input",{type:"number",defaultValue:x.getState().pagination.pageIndex+1,onChange:e=>{const s=e.target.value?Number(e.target.value)-1:0;x.setPageIndex(s)},className:"border p-1 rounded w-16 bg-transparent"})]}),(0,i.jsx)("select",{value:x.getState().pagination.pageSize,onChange:e=>{x.setPageSize(Number(e.target.value))},className:"p-1 md:p-2 lg:p-2  bg-transparent",children:[10,20,30,50].map((e=>(0,i.jsxs)("option",{value:e,children:["Show ",e]},e)))})]})]})]})}},581:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(5043),r=t(7160),o=t(4970),l=t(7111),n=t(7338),i=t(4934),d=t(3003),c=(t(7073),t(8314)),u=t(184),p=t(1079),g=t(9477),m=t(579);const x=()=>{const[e,s]=(0,a.useState)([]),t=(0,l.FB)(),x=(0,d.d4)((e=>e.authState.token)),h=(0,d.d4)((e=>e.authState.user));console.log({user:h});const[f,b]=(0,a.useState)(!1),[w,j]=(0,a.useState)(null),{isLoading:y,setIsLoading:v,message:N,open:k,sendRequest:S,setMessage:C,setOpen:P,initiateLoading:A,abortSucessfullLoading:E}=(0,i.A)(),D=[t.accessor("_id",{header:"ID"}),t.accessor("firstname",{header:"First Name"}),t.accessor("lastname",{header:"Last Name"}),t.accessor("email",{header:"Email"}),t.accessor("phonenumber",{header:"Phone Number"})],[L,z]=(0,a.useState)(D);return(0,a.useEffect)((()=>{(async()=>{try{v(!0);const e=await S("/api/patient/getallpatients","GET",null,{Authorization:x});if(console.log(e),!1===e.status)throw new Error(e.message);s(e.message),v(!1)}catch(e){v(!1),P(!0),C(e.message)}})(),"admin"===(null===h||void 0===h?void 0:h.isAdmin)&&z((e=>{const t=e.some((e=>"edit"===e.id)),a=e.some((e=>"delete"===e.id)),r=[...e];return t||r.push({id:"edit",header:"Edit",cell:e=>(0,m.jsx)("div",{className:"flex justify-start items-center",children:(0,m.jsxs)("button",{onClick:()=>{console.log(e.row.original),b(!0),j(e.row.original)},className:"flex items-center gap-1 bg-green-500 text-white py-1 px-2 rounded-md \r hover:text-[#000000] transition-colors duration-300 ease-in-out\r ",children:[(0,m.jsx)(u.uO9,{}),(0,m.jsx)("span",{children:"Edit"})]})})}),a||r.push({id:"delete",header:"Delete",cell:e=>(0,m.jsx)("div",{className:"flex justify-start items-center",children:(0,m.jsxs)("button",{onClick:()=>{console.log(e.row.original),(async e=>{try{if(!e)throw new Error("id required to delete");const t=await S("/api/patient/deletepatient/".concat(e),"DELETE",null,{Authorization:x});if(!1===t.status)throw new Error(t.message);console.log(t),s((s=>s.filter((s=>s._id!==e)))),E("Sucessfully delete")}catch(t){console.log(t.message),E(t.message)}})(e.row.original._id)},className:"flex items-center gap-1 bg-red-500 text-white py-1 px-2 rounded-md hover:text-[#000000] transition-colors duration-300 ease-in-out",children:[(0,m.jsx)(u.QCr,{}),(0,m.jsx)("span",{children:"Delete"})]})})}),r}))}),[]),(0,m.jsx)(r.A,{children:(0,m.jsxs)("div",{className:"min-h-screen flex text-sm md:text-[20px] lg:text-lg  flex-col lg:px-32 px-5 pt-0 lg:pt-0",children:[(0,m.jsx)(o.A,{title:"Our Doctors"}),(0,m.jsx)("div",{className:"bg-[#fff]",children:y?(0,m.jsx)(c.A,{}):(0,m.jsx)(n.A,{columns:L,data:e})}),(0,m.jsxs)("div",{children:[f&&(0,m.jsx)(g.A,{closeModal:b,user:w,flg:!1}),(0,m.jsx)("div",{children:(0,m.jsx)(p.A,{isLoading:y,message:N,open:k,setOpen:P})})]})]})})}},9477:(e,s,t)=>{t.d(s,{A:()=>c});var a=t(5043),r=t(4563),o=t(3003),l=t(4934),n=t(1079),i=t(579);const d=e=>{let{user:s,closeModal:t,flg:r=!0}=e;const d=(0,o.d4)((e=>e.authState.token));console.log(r);const[c,u]=(0,a.useState)({password:"savonia",confirmPassword:"savonia"}),p=e=>{const{name:s,value:t}=e.target;u((e=>({...e,[s]:t})))},{isLoading:g,setIsLoading:m,sendRequest:x,open:h,setOpen:f,message:b,setMessage:w,initiateLoading:j,abortLoading:y,abortSucessfullLoading:v}=(0,l.A)();return(0,a.useEffect)((()=>()=>{y()}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{className:"bg-white p-15",onSubmit:r?async e=>{try{if(e.preventDefault(),console.log(c),console.log(s),j(),c.password!==c.confirmPassword)throw new Error("Passwords doesnot match");const t=await x("/api/doctor/updatedoctor/".concat(s._id),"POST",JSON.stringify({password:c.password}),{"Content-Type":"application/json",Authorization:d});if(!1===t.status)throw new Error(t.message);v("".concat(s.isAdmin," ").concat(s.firstname," password updated"))}catch(t){v(t.message)}}:async e=>{try{if(e.preventDefault(),console.log(c),console.log(s),j(),c.password!==c.confirmPassword)throw new Error("Passwords doesnot match");const t=await x("/api/patient/updatepatient/".concat(s._id),"POST",JSON.stringify({password:c.password}),{"Content-Type":"application/json",Authorization:d});if(!1===t.status)throw new Error(t.message);v("".concat(s.isAdmin," ").concat(s.firstname," password updated"))}catch(t){v(t.message)}},children:[(0,i.jsx)("div",{children:(0,i.jsx)("h1",{children:" Edit Doctor Details "})}),(0,i.jsxs)("div",{className:"relative z-0 w-full mb-5 group mt-2",children:[(0,i.jsx)("input",{type:"password",name:"password",value:c.password,onChange:p,id:"password",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-gray-800 dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:!0}),(0,i.jsx)("label",{htmlFor:"password",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Password"})]}),(0,i.jsxs)("div",{className:"relative z-0 w-full mb-5 group",children:[(0,i.jsx)("input",{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:p,id:"confirmPassword",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-gray-800 dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:!0}),(0,i.jsx)("label",{htmlFor:"confirmPassword",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Doctor Id"})]}),(0,i.jsxs)("div",{className:"flex gap-x-2",children:[(0,i.jsx)("button",{type:"submit",className:"mt-2 text-sm flex items-center gap-1 bg-green-500 text-white py-1 px-2 rounded-md \r hover:text-gray-800 transition-colors duration-300 ",children:"Submit"}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{className:"mt-2 text-sm flex items-center gap-1 bg-green-500 text-white py-1 px-2 rounded-md \r hover:text-gray-800 transition-colors duration-300 ",onClick:e=>{e.preventDefault(),t(!1)},children:"Close"})})]})]}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(n.A,{isLoading:g,message:b,open:h,setOpen:f})})]})},c=e=>{let{user:s,closeModal:t,flg:a=!0}=e;return(0,i.jsx)(r.A,{children:(0,i.jsx)(d,{user:s,closeModal:t,flg:a})})}},4563:(e,s,t)=>{t.d(s,{A:()=>r});t(5043);var a=t(579);const r=e=>{let{children:s}=e;return(0,a.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,a.jsx)("div",{className:"bg-white p-4 rounded shadow-md w-80",children:s})})}}}]);
//# sourceMappingURL=581.c869242b.chunk.js.map